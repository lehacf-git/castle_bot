# ============================================================================
# CASTLE BOT CONFIGURATION
# ============================================================================
# Copy this file to .env and fill in your actual values
# Command: cp env.example .env
# NEVER commit .env to git - it contains secrets!

# ============================================================================
# GENERAL SETTINGS
# ============================================================================
CASTLE_DB_URL=sqlite:///castle.db
CASTLE_RUNS_DIR=./runs
CASTLE_LOG_LEVEL=INFO

# ============================================================================
# KALSHI API CREDENTIALS
# ============================================================================
# Get your API credentials from: https://kalshi.com/settings/api
# 
# KALSHI_ENV controls which API endpoint to use:
#   - demo: Use Kalshi demo environment (safe for testing)
#   - prod: Use Kalshi production environment (real money!)
KALSHI_ENV=demo

# API Key ID (UUID format)
# Example: 12345678-1234-1234-1234-123456789abc
KALSHI_API_KEY_ID=your-kalshi-api-key-id-here

# Path to your private key file (.pem)
# Download from Kalshi when you generate API credentials
# Store in a secure location outside the repo (e.g., ~/secrets/)
KALSHI_PRIVATE_KEY_PATH=/path/to/your/kalshi-private-key.pem

# Back-compat (the code accepts either KALSHI_API_KEY_ID or KALSHI_KEY_ID)
KALSHI_KEY_ID=

# API Endpoints (usually don't need to change these)
KALSHI_DEMO_ROOT=https://demo-api.kalshi.co/trade-api/v2
KALSHI_PROD_ROOT=https://api.elections.kalshi.com/trade-api/v2

# ============================================================================
# TRADING MODE
# ============================================================================
# CASTLE_MODE controls execution behavior:
#   - test:     Validate API connectivity, no trading
#   - paper:    Simulate fills based on orderbook (default, safe)
#   - training: Use prod data without trading (observational)
#   - demo:     Place real orders in Kalshi demo environment
#   - prod:     Place real orders with real money (dangerous!)
#
# IMPORTANT: 
#   - Start with 'paper' mode for testing
#   - Use 'training' to observe real markets safely
#   - Only use 'demo'/'prod' after extensive testing
CASTLE_MODE=paper

# ============================================================================
# STRATEGY PARAMETERS
# ============================================================================
# Risk Management (in USD)
BANKROLL_USD=500
MAX_RISK_PER_MARKET_USD=20
MAX_TOTAL_EXPOSURE_USD=100

# Edge & Quality Filters
MIN_EDGE_PROB=0.03              # Minimum 3% edge required to trade
MAX_SPREAD_CENTS=10             # Maximum bid-ask spread in cents
MIN_DEPTH_CONTRACTS=50          # Minimum liquidity within 5Â¢ of best

# Order Type
MAKER_ONLY=true                 # Only place resting limit orders (not crossing)

# Fee Estimation (for paper mode)
EST_TAKER_FEE_CENTS_PER_CONTRACT=2

# Testing Overrides
ENABLE_TAKER_TEST=false         # Allow taker orders in paper/training for testing

# ============================================================================
# NEWS SOURCES (OPTIONAL)
# ============================================================================
# Option A: RSS Feeds (free, no API key needed)
# Comma-separated list of RSS feed URLs
# Leave empty to disable
NEWS_FEEDS=
NEWS_LOOKBACK_HOURS=24

# Option B: NewsAPI.org (optional, requires free API key)
# Get your key at: https://newsapi.org/register
NEWS_API_KEY=
NEWSAPI_QUERY=
NEWSAPI_LANGUAGE=en
NEWSAPI_LOOKBACK_HOURS=24

# Option C: Polygon.io (optional, financial news)
# Get your key at: https://polygon.io/
POLYGON_API_KEY=

# ============================================================================
# LLM API KEYS (for Autonomous Trading)
# ============================================================================
# REQUIRED for 'castle trade-autonomous' command
# The autonomous system uses 3 LLMs for consensus trading decisions

# 1. Anthropic (Claude) - Fundamental Analysis
# Get your key at: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# 2. Google (Gemini) - Sentiment Analysis  
# Get your key at: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your-gemini-api-key-here
GEMINI_MODEL=gemini-1.5-flash

# 3. OpenAI (GPT-4) - Technical Analysis
# Get your key at: https://platform.openai.com/api-keys
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-4o
OPENAI_BASE_URL=https://api.openai.com/v1

# ============================================================================
# CODE GENERATION (for Improvement System)
# ============================================================================
# Used by 'castle improve propose' command
# Choose which LLM to use for code generation:
#   - openai: Uses OpenAI (recommended, better code generation)
#   - gemini: Uses Google Gemini (alternative)
CODEGEN_PROVIDER=openai

# ============================================================================
# ADVANCED SETTINGS (Optional)
# ============================================================================
# Uncomment and modify if needed

# Market Filtering (for high-volume trading)
# MIN_VOLUME_24H=0
# MIN_OPEN_INTEREST=50

# Rate Limiting
# MAX_REQUESTS_PER_MINUTE=60

# Logging
# LOG_FILE_PATH=./castle.log
# LOG_ROTATION_SIZE_MB=100

# Database
# DB_POOL_SIZE=5
# DB_MAX_OVERFLOW=10

# ============================================================================
# SECURITY REMINDERS
# ============================================================================
# 1. NEVER commit .env to git once you add real values
# 2. Store .pem files outside the repository
# 3. Rotate API keys regularly
# 4. Use environment-specific keys (separate demo/prod keys)
# 5. Review API usage regularly to detect unauthorized access
# 6. Enable 2FA on all API provider accounts
# ============================================================================
